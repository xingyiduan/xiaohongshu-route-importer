#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ä½¿ç”¨ä¸œäº¬æ—…æ¸¸ç¬”è®°å†…å®¹æµ‹è¯•å¤šè·¯çº¿è§£æåŠŸèƒ½
"""

import sys
import os
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from volcengine_douban_final import VolcengineDoubanParser

def test_tokyo_routes():
    """æµ‹è¯•ä¸œäº¬æ—…æ¸¸ç¬”è®°çš„å¤šè·¯çº¿è§£æ"""
    
    parser = VolcengineDoubanParser()
    
    # ä¸œäº¬æ—…æ¸¸ç¬”è®°å†…å®¹ï¼ˆåŒ…å«6å¤©çš„è·¯çº¿ï¼‰
    tokyo_note = """
å°çº¢ä¹¦

æ—¥æœ¬ä¸œäº¬city walkæ—…æ¸¸çº¿è·¯å¼ºçƒˆæ¨èï¼ä¸ªäººå‘

-Day1[æ‰“å¡R]æ–°å®¿å¾¡è‹‘ï¼Œå¸‚ä¸­å¿ƒå¾ˆèˆ’æœçš„å…¬å›­ï¼Œé‡Œé¢çš„é€ æ™¯èƒ½æ„Ÿå—åˆ°æ—¥æœ¬å›­æ—çš„ç‰¹ç‚¹[æ‰“å¡R]ä¸œäº¬éƒ½å…ï¼Œå…è´¹çš„è§‚æ™¯å°ï¼Œå®Œå…¨ä¸è¾“å…¶ä»–é‚£äº›æ”¶è´¹çš„è§‚æ™¯å°ï¼Œå¼ºçƒˆæ¨è[æ‰“å¡R]æ–°å®¿ï¼Œä¸€å¤§ç‰‡éƒ½å¾ˆå¥½é€›ï¼Œåƒå–ç©ä¹ä¹°ä¹°ä¹°ï¼Œæ­Œèˆä¼ç”ºä¹Ÿåœ¨è¿™ä¸€ç‰‡ï¼Œè½¬ä¸€åœˆå‡ºæ¥ç»§ç»­ä¹°ä¹°ä¹° 

-Day2[æ‰“å¡R]ä¸œäº¬å¡”ï¼Œä¸ªäººæ„Ÿè§‰è¿˜æ˜¯åœ¨åˆ«å¤„è¿œè§‚æ›´æœ‰æ„Ÿè§‰[æ‰“å¡R]è™ä¹‹é—¨ä¹‹ä¸˜ã€éº»å¸ƒå°ä¹‹ä¸˜ã€å…­æœ¬æœ¨ä¹‹ä¸˜ï¼Œéƒ½æ˜¯å¾ˆæœ‰ä¸ªæ€§çš„è¶…çº§å•†ä¸šç»¼åˆä½“ï¼Œå¯¹äºæˆ‘è¿™ç§å»ºç­‘çˆ±å¥½è€…æ¥è¯´å¤ªæœ‰å¸å¼•åŠ›äº†ï¼Œåé¢å¯ä»¥å•ç‹¬ä»‹ç»ä¸€ä¸‹è¿™å‡ ä¸ª"ä¸˜"ï¼›ä¸Šé¢éƒ½æœ‰è§‚æ™¯å°ï¼Œå¯ä»¥é€‰ä¸€ä¸ªç™»ä¸Šå»çœ‹çœ‹[æ‰“å¡R]å›½ç«‹æ–°ç¾æœ¯é¦†ï¼Œé»‘å·çºªç« è®¾è®¡çš„ 

-Day3[æ‰“å¡R]ä¸œäº¬ç«™ï¼Œå¾ˆæœ‰å¹´ä»£æ„Ÿçš„è½¦ç«™äº†ï¼Œå¤§ç©¹é¡¶å¾ˆæ¼‚äº®[æ‰“å¡R]ä¸¸ä¹‹å†…ã€æ–°ä¸¸ä¹‹å†…éƒ½å¾ˆå¥½é€›ï¼Œé‡Œé¢ä¹Ÿä¼šæœ‰å¾ˆå¤šè‰ºæœ¯å±•ï¼Œè´¨é‡å¾ˆé«˜çš„é‚£ç§ï¼›è¦å»ä¸¸ä¹‹å†…çš„å±‹é¡¶æ‹ç…§ï¼Œå¾ˆé­”å¹»[æ‰“å¡R]çš‡å±…ï¼Œæ—¥æœ¬å¤©çš‡ä½çš„åœ°æ–¹ï¼Œè¿œä¸åŠå›½å†…çš„å®«æ®¿-ä¸ªäººå‘[doge]ï¼Œå¦‚æœæ²¡æ—¶é—´ä¸ç”¨ç‰¹æ„è¿›å»ï¼Œå“ˆå“ˆå“ˆå“ˆ 

-Day4[æ‰“å¡R]æµ…è‰å¯ºï¼Œç»å…¸æ‰“å¡ç‚¹ï¼Œå¯¹äºä¸­å›½äººæ¥è¯´å¯èƒ½ä¼šå¤±æœ›ï¼Œå¤åˆ¹è¿˜æ˜¯å¾—çœ‹å›½å†…çš„[æ‰“å¡R]ä¸œäº¬å›½ç«‹åšç‰©é¦†ï¼Œä¸»é¦†ä¸»è¦ä»‹ç»æ—¥æœ¬ï¼Œä¸œæ´‹é¦†é‡Œé¢å¤§éƒ¨åˆ†æ˜¯ä¸­å›½æ–‡ç‰©ï¼Œæœ€å€¼å¾—é€›ï¼›é€›å›½å¤–çš„åšç‰©é¦†è¿˜æ˜¯å»ºè®®æ‰¾ä¸ªè®²è§£ï¼Œæ¯”å¦‚@ä¸œäº¬å›½ç«‹åšç‰©é¦†è®²è§£æ¨å¤§çœ¼ [doge] [æ‰“å¡R]å›½ç«‹è¥¿æ´‹ç¾æœ¯é¦†ï¼Œå»çš„æ—¶å€™æ­£å¥½ç¢°ä¸Šè«å¥ˆç‰¹å±•ï¼Œåº”è¯¥æ˜¯åˆ°25å¹´2æœˆ[æ‰“å¡R]ç§‹å¶åŸï¼ŒäºŒæ¬¡å…ƒæœåœ£åœ°ï¼Œå–œæ¬¢äºŒæ¬¡å…ƒçš„åŒå­¦å¯ä»¥å•ç‹¬é€›é€›è¿™é‡Œ 

-Day5[æ‰“å¡R]ä»£å®˜å±±ã€è¡¨å‚é“ï¼Œè¿™ä¸€ç‰‡éƒ½æ˜¯æ½®äººèšé›†åœ°[æ‰“å¡R]æ¶©è°·ï¼Œæœ€ç¹å¿™çš„è·¯å£ï¼Œå¿ çŠ¬å…«å…¬åƒã€æ¶©è°·skyè§‚æ™¯å°éƒ½åœ¨è¿™ 

-Day6[æ‰“å¡R]é“¶åº§ï¼Œç®€ç›´æ˜¯è´­ç‰©å¤©å ‚ï¼Œåœ¨è¿™é‡Œå‡ ä¹å¯ä»¥ä¹°åˆ°ä½ æƒ³ä¹°çš„æ‰€æœ‰ä¸œè¥¿ï¼Œè¿™æ¬¡ä½è¿™é™„è¿‘ä¸€æœ‰ç©ºå°±èƒ½é€›é€›[å¤§ç¬‘R] 

#ä¸œäº¬æ—…è¡Œ #æ—¥æœ¬æ—…è¡Œ #ä¸œäº¬city_walk #é“¶åº§ #æ–°å®¿ #ä¸œäº¬å¡” #ä¸œäº¬å›½ç«‹åšç‰©é¦† #æ–°å¹´æ—…è¡Œç¬¬ä¸€ç«™
"""
    
    print("ğŸ—¾ æµ‹è¯•ä¸œäº¬æ—…æ¸¸ç¬”è®°å¤šè·¯çº¿è§£æ")
    print("=" * 60)
    
    try:
        result = parser.parse_note(tokyo_note, "tokyo_test_url")
        
        if result:
            print("âœ… AIè§£ææˆåŠŸï¼")
            print(f"æ ‡é¢˜: {result.get('title', 'N/A')}")
            
            # æ£€æŸ¥å¤šè·¯çº¿ç»“æ„
            if 'routes' in result and result['routes']:
                print(f"ğŸ—ºï¸ è¯†åˆ«åˆ° {len(result['routes'])} æ¡è·¯çº¿:")
                print()
                
                for i, route in enumerate(result['routes'], 1):
                    print(f"è·¯çº¿ {i}: {route.get('route_name', 'N/A')}")
                    print(f"  åœ°ç‚¹æ•°é‡: {len(route.get('places', []))}")
                    
                    # æ˜¾ç¤ºåœ°ç‚¹
                    places = route.get('places', [])
                    for j, place in enumerate(places[:3], 1):  # åªæ˜¾ç¤ºå‰3ä¸ª
                        print(f"    {j}. {place.get('name', 'N/A')}")
                    
                    if len(places) > 3:
                        print(f"    ... è¿˜æœ‰ {len(places) - 3} ä¸ªåœ°ç‚¹")
                    print()
            else:
                print("âš ï¸  æœªè¯†åˆ«åˆ°å¤šè·¯çº¿ç»“æ„")
                if 'places' in result:
                    print(f"  å•è·¯çº¿åœ°ç‚¹æ•°é‡: {len(result['places'])}")
            
        else:
            print("âŒ AIè§£æå¤±è´¥ï¼Œè¿”å›None")
            
    except Exception as e:
        print(f"âŒ å¼‚å¸¸: {str(e)}")
        import traceback
        traceback.print_exc()

if __name__ == '__main__':
    test_tokyo_routes()
