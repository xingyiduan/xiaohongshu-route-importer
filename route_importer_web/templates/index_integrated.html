<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小红书路线导入器 - AI增强版</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>🚀 小红书路线导入器</h1>
            <p class="subtitle">AI智能解析 + 路线规划</p>
        </header>

        <!-- 解析器状态信息 -->
        <section id="parser-info-section" class="parser-status">
            <!-- 解析器信息将通过JavaScript动态加载 -->
        </section>

        <!-- 输入区域 -->
        <section class="input-section">
            <div class="input-group">
                <input type="url" id="url-input" placeholder="请输入小红书笔记链接..." required>
                <button id="parse-btn" class="btn btn-primary">
                    <span class="btn-icon">🤖</span>
                    开始AI解析
                </button>
            </div>
            <p class="input-hint">
                💡 支持小红书链接，AI将自动提取地点信息并规划最佳步行路线
            </p>
        </section>

        <!-- 加载状态 -->
        <section id="loading-section" class="loading-section" style="display: none;">
            <!-- 加载状态将通过JavaScript动态加载 -->
        </section>

        <!-- 错误提示 -->
        <section id="error-section" class="error-section" style="display: none;">
            <!-- 错误信息将通过JavaScript动态加载 -->
        </section>

        <!-- 结果展示 -->
        <section id="result-section" class="result-section" style="display: none;">
            <!-- 路线信息卡片 -->
            <div class="route-info-card" id="route-info-card">
                <!-- 路线信息将通过JavaScript动态加载 -->
            </div>

            <!-- 地点列表 -->
            <div class="places-section">
                <h3>📍 识别到的地点</h3>
                <div class="places-list" id="places-list">
                    <!-- 地点列表将通过JavaScript动态加载 -->
                </div>
            </div>

            <!-- 地图区域 -->
            <div class="map-section" id="map-section">
                <h3>🗺️ 路线地图</h3>
                <div class="map-placeholder">
                    <p>地图组件将在这里显示</p>
                </div>
            </div>

            <!-- 操作按钮 -->
            <div class="action-buttons">
                <button id="open-map-btn" class="btn btn-secondary">
                    <span class="btn-icon">🗺️</span>
                    在地图App中打开
                </button>
                <button id="save-route-btn" class="btn btn-success">
                    <span class="btn-icon">💾</span>
                    保存路线
                </button>
            </div>
        </section>
    </div>

    <!-- 保存路线模态框 -->
    <div id="save-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>💾 保存路线</h3>
                <span class="close">&times;</span>
            </div>
            <form id="save-form" class="modal-form">
                <div class="form-group">
                    <label for="route-name">路线名称</label>
                    <input type="text" id="route-name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="route-description">路线描述</label>
                    <textarea id="route-description" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="source-url">来源链接</label>
                    <input type="url" id="source-url" name="source_url" readonly>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('save-modal').style.display='none'">取消</button>
                    <button type="submit" class="btn btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app_integrated.js') }}"></script>
</body>
</html>
